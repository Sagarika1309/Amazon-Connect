{"modules":[{"id":"f7ca936e-e23e-455b-8a3d-b40124b8c849","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1113,"y":1788}}},{"id":"768479ca-df59-41ae-a9b8-202ce4ad1f2a","type":"PlayPrompt","branches":[{"condition":"Success","transition":"3807d6d4-c386-48d0-9216-e85717f11134"}],"parameters":[{"name":"Text","value":"Hello! This is BUPA's automated agent designed to help answer your questions.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":149,"y":71.00000000000001},"useDynamic":false}},{"id":"45c1811b-00e4-4cce-a552-a64c31dd94c0","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"d93a31c8-71ed-4179-af85-ff3c3cd93b45"},{"condition":"Error","transition":"31587176-be74-4a47-9598-9b3c9b3013e5"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:670152460841:function:getCustomerDetails","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"phoneNumber","value":"phoneNumber","namespace":"User Defined"}],"metadata":{"position":{"x":1008,"y":15},"dynamicMetadata":{"phoneNumber":true},"useDynamic":false},"target":"Lambda"},{"id":"3807d6d4-c386-48d0-9216-e85717f11134","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"GetPhoneNumber","transition":"dd48ac01-2eeb-4fa9-97b3-5d8a98b6b984"},{"condition":"NoMatch","transition":"31587176-be74-4a47-9598-9b3c9b3013e5"},{"condition":"Error","transition":"31587176-be74-4a47-9598-9b3c9b3013e5"}],"parameters":[{"name":"Text","value":"Please enter your registered phone number.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"NeedAuthCode"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":410,"y":68},"conditionMetadata":[{"id":"cf6dfa83-3c63-46ea-bc3a-329654ce8b0a","value":"GetPhoneNumber"}],"useDynamic":false,"dynamicMetadata":{},"useLexBotDropdown":true,"useDynamicLexBotArn":false,"lexV2BotName":"NeedAuthCode"},"target":"Lex"},{"id":"5b773c85-4655-47ea-8fc9-bb73232cfcb3","type":"SetAttributes","branches":[{"condition":"Success","transition":"4f872b85-7a48-4ffa-acf5-b3e24a8421e6"},{"condition":"Error","transition":"4f872b85-7a48-4ffa-acf5-b3e24a8421e6"}],"parameters":[{"name":"Attribute","value":"Name","key":"CustomerName","namespace":"External"},{"name":"Attribute","value":"FinServ__OtherAddress__c","key":"SFOtherAddress","namespace":"External"},{"name":"Attribute","value":"FinServ__CountryOfResidence__c","key":"SFCountry","namespace":"External"},{"name":"Attribute","value":"FinServ__MailingAddress__c","key":"SFMailingAddress","namespace":"External"},{"name":"Attribute","value":"MobilePhone","key":"phone_number","namespace":"External"},{"name":"Attribute","value":"Id","key":"Id","namespace":"External"},{"name":"Attribute","value":"Email","key":"ContactEmail","namespace":"External"}],"metadata":{"position":{"x":751,"y":387}}},{"id":"31587176-be74-4a47-9598-9b3c9b3013e5","type":"PlayPrompt","branches":[{"condition":"Success","transition":"ad4ef04b-71ba-4c9d-8ce7-85f459de32c3"}],"parameters":[{"name":"Text","value":"Sorry! We are facing some technical issue. Let me forward you to our BUPA service representative.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1278,"y":247},"useDynamic":false}},{"id":"dd48ac01-2eeb-4fa9-97b3-5d8a98b6b984","type":"SetAttributes","branches":[{"condition":"Success","transition":"45c1811b-00e4-4cce-a552-a64c31dd94c0"},{"condition":"Error","transition":"31587176-be74-4a47-9598-9b3c9b3013e5"}],"parameters":[{"name":"Attribute","value":"phoneNo","key":"phoneNumber","namespace":"Lex.Slots"}],"metadata":{"position":{"x":715,"y":76}}},{"id":"d93a31c8-71ed-4179-af85-ff3c3cd93b45","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"NULL","transition":"6c18de4c-9c54-4073-95fe-d412f40b6bb9"},{"condition":"NoMatch","transition":"4f872b85-7a48-4ffa-acf5-b3e24a8421e6"}],"parameters":[{"name":"Attribute","value":"lastName"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1194,"y":446},"conditionMetadata":[{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"NULL","id":"667a5a92-3f68-4576-b3f9-cb9ed3d51db9"}]}},{"id":"6c18de4c-9c54-4073-95fe-d412f40b6bb9","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dd48ac01-2eeb-4fa9-97b3-5d8a98b6b984"}],"parameters":[{"name":"Text","value":"Please enter a valid phone number.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1246,"y":739},"useDynamic":false}},{"id":"da51053a-c4aa-4988-a7d3-27b849a9c1b7","type":"PlayPrompt","branches":[{"condition":"Success","transition":"3a4c2e41-d11e-4a2f-9992-faf1ed9b09b0"}],"parameters":[{"name":"Text","value":"Thanks for entering your information.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1162,"y":919},"useDynamic":false}},{"id":"f539ceb4-bed8-4144-a3a3-6c9b9d1039e9","type":"SetAttributes","branches":[{"condition":"Success","transition":"da51053a-c4aa-4988-a7d3-27b849a9c1b7"},{"condition":"Error","transition":"f1cb7e5a-153b-41c3-b427-c1c3e53c2034"}],"parameters":[{"name":"Attribute","value":"birthDate","key":"dob","namespace":"Lex.Slots"}],"metadata":{"position":{"x":798,"y":814}}},{"id":"f1cb7e5a-153b-41c3-b427-c1c3e53c2034","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c88e492b-7669-4280-a60a-7d0a9fe028f8"}],"parameters":[{"name":"Text","value":"Sorry. Your date of birth is not matching with our record. Could you please try again?","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":561,"y":1267},"useDynamic":false}},{"id":"3a4c2e41-d11e-4a2f-9992-faf1ed9b09b0","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"d98b6994-41fb-41bb-b77f-ad68c46ed90f"},{"condition":"Error","transition":"d8f3138f-69fe-4a3f-9b43-e334bc5fdf8f"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:670152460841:function:getDOBOfCustomer","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"phoneNumber","value":"phoneNumber","namespace":"User Defined"},{"name":"Parameter","key":"dob","value":"dob","namespace":"User Defined"}],"metadata":{"position":{"x":904,"y":1166},"dynamicMetadata":{"phoneNumber":true,"dob":true},"useDynamic":false},"target":"Lambda"},{"id":"d98b6994-41fb-41bb-b77f-ad68c46ed90f","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"True","transition":"223bb548-b62d-4f73-8885-e580b2089518"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"False","transition":"d8f3138f-69fe-4a3f-9b43-e334bc5fdf8f"},{"condition":"NoMatch","transition":"d8f3138f-69fe-4a3f-9b43-e334bc5fdf8f"}],"parameters":[{"name":"Attribute","value":"authorized"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1183,"y":1274},"conditionMetadata":[{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"True","id":"23ba14ba-ba4f-4b2d-b38d-bcd82bd154d0"},{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"False","id":"c526e2a8-006c-49f0-9793-2026ac2c318b"}]}},{"id":"d8f3138f-69fe-4a3f-9b43-e334bc5fdf8f","type":"Loop","branches":[{"condition":"Looping","transition":"f1cb7e5a-153b-41c3-b427-c1c3e53c2034"},{"condition":"Complete","transition":"15439370-6766-4662-ab73-fb5d6e0f58f6"}],"parameters":[{"name":"LoopCount","value":"3"}],"metadata":{"position":{"x":194,"y":1249},"useDynamic":false}},{"id":"8ee1c198-bd77-4c22-847a-005b3730c272","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"f7ca936e-e23e-455b-8a3d-b40124b8c849"},{"condition":"Error","transition":"f7ca936e-e23e-455b-8a3d-b40124b8c849"}],"parameters":[],"metadata":{"position":{"x":786,"y":1566},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"07b37fe2-e656-4534-b219-57e6acb50d31","type":"PlayPrompt","branches":[{"condition":"Success","transition":"badfce58-4b4d-415a-ab48-6505cf761526"}],"parameters":[{"name":"Text","value":"There is some technical error.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":674,"y":1814},"useDynamic":false}},{"id":"15439370-6766-4662-ab73-fb5d6e0f58f6","type":"PlayPrompt","branches":[{"condition":"Success","transition":"badfce58-4b4d-415a-ab48-6505cf761526"}],"parameters":[{"name":"Text","value":"Sorry! You have exceeded the maximum attempts of providing details or additional verification. Let me forward you to our member service representative..","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":274,"y":1556},"useDynamic":false}},{"id":"ec98e0a7-8cf3-4841-bdd6-0044b73c2951","type":"PlayPrompt","branches":[{"condition":"Success","transition":"badfce58-4b4d-415a-ab48-6505cf761526"}],"parameters":[{"name":"Text","value":"Sorry, we are facing some issue. Transferring you to our Agent.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":304,"y":1785},"useDynamic":false}},{"id":"223bb548-b62d-4f73-8885-e580b2089518","type":"PlayPrompt","branches":[{"condition":"Success","transition":"cd747aef-8fca-4da3-b89f-53b1da2232ab"}],"parameters":[{"name":"Text","value":"You have now passed initial security check.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1431,"y":1921},"useDynamic":false}},{"id":"3a71ef34-65ca-47d4-b915-fd0136ce8fd3","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4429f135-2070-439b-9abd-b607aa889e42"}],"parameters":[{"name":"Text","value":"Error","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1153.083740234375,"y":2731.199462890625},"useDynamic":false}},{"id":"f75b3b0f-b3f0-48eb-a007-1539176f3bb1","type":"PlayPrompt","branches":[{"condition":"Success","transition":"17aab5a2-543f-41b6-b548-a9c215237872"}],"parameters":[{"name":"Text","value":"Thanks You for entering your Customer ID.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":841,"y":2287},"useDynamic":false}},{"id":"17aab5a2-543f-41b6-b548-a9c215237872","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"f85cfddf-72f7-46e4-ac6a-74a033ccd899"},{"condition":"Error","transition":"3a71ef34-65ca-47d4-b915-fd0136ce8fd3"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:670152460841:function:getCustomerID","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"phoneNumber","value":"phoneNumber","namespace":"User Defined"},{"name":"Parameter","key":"cid","value":"cid","namespace":"User Defined"}],"metadata":{"position":{"x":1108,"y":2267},"dynamicMetadata":{"phoneNumber":true,"cid":true},"useDynamic":false},"target":"Lambda"},{"id":"f85cfddf-72f7-46e4-ac6a-74a033ccd899","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"True","transition":"2ae45965-ecb7-4665-954f-6950c238ffa6"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"False","transition":"4429f135-2070-439b-9abd-b607aa889e42"},{"condition":"NoMatch","transition":"4429f135-2070-439b-9abd-b607aa889e42"}],"parameters":[{"name":"Attribute","value":"authorized"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1361,"y":2257},"conditionMetadata":[{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"True","id":"d1c6d313-d668-4baf-9884-9bd644fed143"},{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"False","id":"f7c67122-37e7-491d-b852-ef97f80d297e"}]}},{"id":"4f872b85-7a48-4ffa-acf5-b3e24a8421e6","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c88e492b-7669-4280-a60a-7d0a9fe028f8"}],"parameters":[{"name":"Text","value":"Hello $.External.firstName $.External.lastName. Welcome to BUPA! We see that you are calling from your authorized number and we have your information.","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":228,"y":628},"useDynamic":false}},{"id":"c88e492b-7669-4280-a60a-7d0a9fe028f8","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"GetBirthdate","transition":"f539ceb4-bed8-4144-a3a3-6c9b9d1039e9"},{"condition":"NoMatch","transition":"d28eac20-6982-47cd-ba25-d2f1474ebf97"},{"condition":"Error","transition":"31587176-be74-4a47-9598-9b3c9b3013e5"}],"parameters":[{"name":"Text","value":"To complete our security check, please type your date of birth in the format of day month year. For example, if you were born on 1st January, 1970 then type 01011970.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"NeedAuthCode"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":482,"y":713},"conditionMetadata":[{"id":"e9b2f6ee-0f06-4424-896c-f88f64569705","value":"GetBirthdate"}],"useDynamic":false,"dynamicMetadata":{},"useLexBotDropdown":true,"useDynamicLexBotArn":false,"lexV2BotName":"NeedAuthCode"},"target":"Lex"},{"id":"d28eac20-6982-47cd-ba25-d2f1474ebf97","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4f872b85-7a48-4ffa-acf5-b3e24a8421e6"}],"parameters":[{"name":"Text","value":"Please enter a valid dob.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":546.9403686523438,"y":979.0116577148438},"useDynamic":false}},{"id":"cd747aef-8fca-4da3-b89f-53b1da2232ab","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Get_Customer_Id","transition":"a0eaa14f-297e-4a8b-af62-664ad816e3ae"},{"condition":"NoMatch","transition":"4b868499-fac3-4c8f-89b8-a1d41632f835"},{"condition":"Error","transition":"ec98e0a7-8cf3-4841-bdd6-0044b73c2951"}],"parameters":[{"name":"Text","value":"Last step of verification: Enter Your Customer ID","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"NeedAuthCode"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":347,"y":2227},"conditionMetadata":[{"id":"ccd9f6e3-6470-4398-ae37-5887a7337a7b","value":"Get_Customer_Id"}],"useDynamic":false,"dynamicMetadata":{},"useLexBotDropdown":true,"useDynamicLexBotArn":false,"lexV2BotName":"NeedAuthCode"},"target":"Lex"},{"id":"4b868499-fac3-4c8f-89b8-a1d41632f835","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4429f135-2070-439b-9abd-b607aa889e42"}],"parameters":[{"name":"Text","value":"Please enter a valid customer ID.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":356,"y":2507},"useDynamic":false}},{"id":"4429f135-2070-439b-9abd-b607aa889e42","type":"Loop","branches":[{"condition":"Looping","transition":"cd747aef-8fca-4da3-b89f-53b1da2232ab"},{"condition":"Complete","transition":"15439370-6766-4662-ab73-fb5d6e0f58f6"}],"parameters":[{"name":"LoopCount","value":"3"}],"metadata":{"position":{"x":878,"y":2727},"useDynamic":false}},{"id":"a0eaa14f-297e-4a8b-af62-664ad816e3ae","type":"SetAttributes","branches":[{"condition":"Success","transition":"f75b3b0f-b3f0-48eb-a007-1539176f3bb1"},{"condition":"Error","transition":"b9395320-d99f-4606-ad0e-54621ea884f0"}],"parameters":[{"name":"Attribute","value":"customerId","key":"cid","namespace":"Lex.Slots"}],"metadata":{"position":{"x":596,"y":2242}}},{"id":"b9395320-d99f-4606-ad0e-54621ea884f0","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4429f135-2070-439b-9abd-b607aa889e42"}],"parameters":[{"name":"Text","value":"Sorry your Customer ID does not match with our record.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":478,"y":2725},"useDynamic":false}},{"id":"2ae45965-ecb7-4665-954f-6950c238ffa6","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9db3e77b-27d8-407e-b211-8ec8db89b6aa"}],"parameters":[{"name":"Text","value":"You have now passed all the security checks.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1801,"y":1461},"useDynamic":false}},{"id":"2a59fa97-6495-4df6-b10f-e9579f6305e6","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":3243,"y":620}}},{"id":"e3addfe6-6b3f-4030-ab07-e8e04199cf00","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c3744fc5-56d8-4bbe-bbd8-d427938236ef"}],"parameters":[{"name":"Text","value":"We appreciate you for selecting our service. We recognize the trust and responsibility you placed in us and we will do everything possible to provide for those needs. We look forward to seeing you! Thanks, BUPA.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1851,"y":398},"useDynamic":false}},{"id":"cd9d4a9c-2f56-43b2-b965-18bcd04e8162","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"YesInte","transition":"9db3e77b-27d8-407e-b211-8ec8db89b6aa"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"NoInte","transition":"c3744fc5-56d8-4bbe-bbd8-d427938236ef"},{"condition":"NoMatch","transition":"c3744fc5-56d8-4bbe-bbd8-d427938236ef"},{"condition":"Error","transition":"c3744fc5-56d8-4bbe-bbd8-d427938236ef"}],"parameters":[{"name":"Text","value":"do you need any other help?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"VanguardBot"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1700,"y":887},"conditionMetadata":[{"id":"1c58883d-ea9c-4bcd-9d61-260ec24a211f","value":"YesInte"},{"id":"94c63a96-f38a-4cd9-bb0b-d022fe8b56fd","value":"NoInte"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"c3744fc5-56d8-4bbe-bbd8-d427938236ef","type":"PlayPrompt","branches":[{"condition":"Success","transition":"2a59fa97-6495-4df6-b10f-e9579f6305e6"}],"parameters":[{"name":"Text","value":"Thank you for connecting with us. Have a nice day!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2436,"y":726},"useDynamic":false}},{"id":"1e34447a-8629-488d-95b2-efa26e539e7f","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"2a59fa97-6495-4df6-b10f-e9579f6305e6"},{"condition":"Error","transition":"2a59fa97-6495-4df6-b10f-e9579f6305e6"}],"parameters":[],"metadata":{"position":{"x":2787,"y":428.00000000000006},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"e47a1134-cbdd-414a-b4bb-fa16dc1b50a7","type":"SetQueue","branches":[{"condition":"Success","transition":"1e34447a-8629-488d-95b2-efa26e539e7f"},{"condition":"Error","transition":"1e34447a-8629-488d-95b2-efa26e539e7f"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:670152460841:instance/b77b26b5-33f7-4ac9-b70b-ba97a6ea193d/queue/ef39ae1e-8128-4114-9f4e-326c0dee8575","namespace":null,"resourceName":"General Support"}],"metadata":{"position":{"x":2470,"y":177.99999999999997},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:670152460841:instance/b77b26b5-33f7-4ac9-b70b-ba97a6ea193d/queue/ef39ae1e-8128-4114-9f4e-326c0dee8575","text":"General Support"}}},{"id":"239b92ea-1397-468b-abe4-1f133f9bab87","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9db3e77b-27d8-407e-b211-8ec8db89b6aa"}],"parameters":[{"name":"Text","value":"You don't have any authorization code.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":3084,"y":1244},"useDynamic":false}},{"id":"e4e2ea30-51c1-42a4-973a-df6e624c2c0d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"7c8ac987-12a5-4799-b9c4-8fc485d10222"}],"parameters":[{"name":"AudioPrompt","value":"arn:aws:connect:us-east-1:670152460841:instance/b77b26b5-33f7-4ac9-b70b-ba97a6ea193d/prompt/4244e406-724d-48d9-aead-0451e308a197","namespace":null,"resourceName":"Beep.wav"}],"metadata":{"position":{"x":2193,"y":1155},"useDynamic":false,"promptName":"Beep.wav"}},{"id":"4777a9dc-0370-4c95-83c4-494bc7c4005f","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Null","transition":"239b92ea-1397-468b-abe4-1f133f9bab87"},{"condition":"NoMatch","transition":"e9edbdac-643d-448c-aeed-b6911eb0448c"}],"parameters":[{"name":"Attribute","value":"authCode"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":2626,"y":1096},"conditionMetadata":[{"operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Null","id":"4a2e7a44-bb1f-4875-a75d-f2385a5129b8"}]}},{"id":"e9edbdac-643d-448c-aeed-b6911eb0448c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"227acaf9-1312-483d-800c-aab61f9fed5b"}],"parameters":[{"name":"Text","value":"Please note your authorization code. Authorization code is $.External.authCode.","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":3038,"y":1516},"useDynamic":false}},{"id":"227acaf9-1312-483d-800c-aab61f9fed5b","type":"PlayPrompt","branches":[{"condition":"Success","transition":"a635e2ef-7bb8-48bd-ab97-59aac10d014c"}],"parameters":[{"name":"Text","value":"You will be receiving an authorization code as SMS shortly on your registered phone number.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":3284,"y":1461},"useDynamic":false}},{"id":"9db3e77b-27d8-407e-b211-8ec8db89b6aa","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Agent","transition":"ad4ef04b-71ba-4c9d-8ce7-85f459de32c3"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"AuthorizationCode","transition":"e4e2ea30-51c1-42a4-973a-df6e624c2c0d"},{"condition":"NoMatch","transition":"e3addfe6-6b3f-4030-ab07-e8e04199cf00"},{"condition":"Error","transition":"e3addfe6-6b3f-4030-ab07-e8e04199cf00"}],"parameters":[{"name":"Text","value":"How can i help you? \nWould you like to get an authorization code or talk to our BUPA agent or share your feedback with us?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"BupaDemoBot"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1556,"y":171},"conditionMetadata":[{"id":"6e981631-0887-4c56-ae5a-bda9cbb4836e","value":"Agent"},{"id":"7e082feb-1d0e-4aa0-b292-145b9153238b","value":"AuthorizationCode"}],"useDynamic":false,"dynamicMetadata":{},"useDynamicLexBotArn":false},"target":"Lex"},{"id":"ad4ef04b-71ba-4c9d-8ce7-85f459de32c3","type":"SetAttributes","branches":[{"condition":"Success","transition":"e47a1134-cbdd-414a-b4bb-fa16dc1b50a7"},{"condition":"Error","transition":"e47a1134-cbdd-414a-b4bb-fa16dc1b50a7"}],"parameters":[{"name":"Attribute","value":"true","key":"postcallTranscribeEnabled","namespace":null},{"name":"Attribute","value":"en-IN","key":"postcallTranscribeLanguage","namespace":null},{"name":"Attribute","value":"true","key":"postcallRecordingImportEnabled","namespace":null},{"name":"Attribute","value":"snt,dl,kw,syn","key":"postcallTranscribeComprehendAnalysis","namespace":null},{"name":"Attribute","value":"true","key":"postcallCTRImportEnabled","namespace":null}],"metadata":{"position":{"x":2131,"y":22}}},{"id":"a635e2ef-7bb8-48bd-ab97-59aac10d014c","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"0dcabbf7-6571-4cfb-8779-f4d279a86529"},{"condition":"Error","transition":"f18ead66-e504-408c-912c-9ee3de700b5b"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:670152460841:function:BupeDemoSendSMSAuthCode","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"messageContent","value":"This is Capgemini's CCaaS. Your requested Authorization code is $.External.authCode","namespace":null},{"name":"Parameter","key":"destinationNumber","value":"phoneNumber","namespace":"User Defined"}],"metadata":{"position":{"x":3515,"y":1449},"dynamicMetadata":{"messageContent":false,"destinationNumber":true},"useDynamic":false},"target":"Lambda"},{"id":"f18ead66-e504-408c-912c-9ee3de700b5b","type":"PlayPrompt","branches":[{"condition":"Success","transition":"0dcabbf7-6571-4cfb-8779-f4d279a86529"}],"parameters":[{"name":"Text","value":"Authorization Code is not sent.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":3774,"y":1573},"useDynamic":false}},{"id":"badfce58-4b4d-415a-ab48-6505cf761526","type":"SetQueue","branches":[{"condition":"Success","transition":"8ee1c198-bd77-4c22-847a-005b3730c272"},{"condition":"Error","transition":"8ee1c198-bd77-4c22-847a-005b3730c272"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:670152460841:instance/b77b26b5-33f7-4ac9-b70b-ba97a6ea193d/queue/ef39ae1e-8128-4114-9f4e-326c0dee8575","namespace":null,"resourceName":"General Support"}],"metadata":{"position":{"x":555,"y":1545},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:670152460841:instance/b77b26b5-33f7-4ac9-b70b-ba97a6ea193d/queue/ef39ae1e-8128-4114-9f4e-326c0dee8575","text":"General Support"}}},{"id":"7c8ac987-12a5-4799-b9c4-8fc485d10222","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"4777a9dc-0370-4c95-83c4-494bc7c4005f"},{"condition":"Error","transition":"98c172e9-382c-4aa4-a1dc-7e39bbd35bb4"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:670152460841:function:checkAuthCode","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"phoneNumber","value":"phoneNumber","namespace":"User Defined"}],"metadata":{"position":{"x":2417,"y":1436},"dynamicMetadata":{"phoneNumber":true},"useDynamic":false},"target":"Lambda"},{"id":"0dcabbf7-6571-4cfb-8779-f4d279a86529","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"back","transition":"9db3e77b-27d8-407e-b211-8ec8db89b6aa"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Agent","transition":"ad4ef04b-71ba-4c9d-8ce7-85f459de32c3"},{"condition":"NoMatch","transition":"98c172e9-382c-4aa4-a1dc-7e39bbd35bb4"},{"condition":"Error","transition":"98c172e9-382c-4aa4-a1dc-7e39bbd35bb4"}],"parameters":[{"name":"Text","value":"To go back to main menu, please type back. Or if you would like to chat with a member of our Service team, please type Adviser","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"BupaDemoBot"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":3015,"y":1717},"conditionMetadata":[{"id":"1d47c203-0ac0-4fe2-ac34-35ec9a7c84a0","value":"back"},{"id":"788e93fa-19ac-417b-b84a-1ac5327b10fd","value":"Agent"}],"useDynamic":false,"dynamicMetadata":{},"useDynamicLexBotArn":false},"target":"Lex"},{"id":"98c172e9-382c-4aa4-a1dc-7e39bbd35bb4","type":"PlayPrompt","branches":[{"condition":"Success","transition":"badfce58-4b4d-415a-ab48-6505cf761526"}],"parameters":[{"name":"Text","value":"There is some technical error. Let me connect you to our customer representative.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2305,"y":2038},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"768479ca-df59-41ae-a9b8-202ce4ad1f2a","metadata":{"entryPointPosition":{"x":12,"y":64.99999084441468},"snapToGrid":false,"name":"BUPA-SC-9 &10","description":"Self Service and VA Escalation to Agent Chat Scenario","type":"contactFlow","status":"published","hash":"bf97d0556c16637a9086bd669038f9a942769cf18cbbff139802af97d5a7f679"}}